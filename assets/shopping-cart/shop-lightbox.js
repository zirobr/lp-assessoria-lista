
var getSiblings=function(g){for(var a=[],f=g.parentNode.firstChild;f;)1===f.nodeType&&f!==g&&a.push(f),f=f.nextSibling;return a},itemlink=document.querySelectorAll('a[href*="data:application"]'),shopLightboxTemplate=document.createElement("div"),shopLightboxHTML='<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body"><button class="close mbr-icon-times" data-dismiss="modal" aria-label="Close">\u00d7</button><div class="row"><div class="col-12 col-md-6"><img class="form-group item-image w-100"></div><div class="col"><div class="form-group name"><h5 class="item-name"></h5></div><div class="form-group row"><div class="col-auto price display-5"><span class="item-cur"></span><span class="item-price"></span></div><div class="col-auto old-price display-5"><span class="item-cur"></span><span class="item-old-price"></span></div></div><div class="form-group row variants"><div class="col-12"><label class="variant1-label"></label><select class="form-control variant1"></select></div><div class="col-12"><label class="variant2-label"></label><select class="form-control variant2"></select></div><div class="col-12"><label class="variant3-label"></label><select class="form-control variant3"></select></div></div><div class="form-group row"><div class="mbr-section-btn"><div class="col"><a class="btn btn-sm btn-primary buy-button display-4" href=""></a></div></div></div><div class="description form-group"><p class="item-description display-7"></p></div></div></div></div></div></div></div>';
document.querySelector("body").append(shopLightboxTemplate);shopLightboxTemplate.outerHTML=shopLightboxHTML;
itemlink.forEach(function(g){g.setAttribute("data-toggle","modal");g.setAttribute("data-target","#exampleModal");var a=document.querySelector("#exampleModal");g.addEventListener("click",function(f){a.show();var c=JSON.parse(decodeURIComponent(g.getAttribute("href").replace(/^data:application\/json,/,"")));a.querySelector(".item-name").innerHTML=c.item_name||c.name;"_donations"!==c.type&&"_xclick-subscriptions"!==c.type?(c.oldPrice?a.querySelector(".item-old-price").innerHTML=c.oldPrice:a.querySelector(".old-price").style.display=
"none",a.querySelector(".item-cur").forEach(function(a){a.innerHTML=a.currency_code||a.currency})):(c.oldPrice?a.querySelector(".item-old-price").innerHTML=c.oldPrice:a.querySelector(".old-price").style.display="none",a.querySelector(".item-cur").forEach(function(a){a.innerHTML=a.currency_code||a.currency}),a.querySelector(".item-cur").style.display="none",a.querySelector(".old-price").style.display="none");a.querySelector(".item-description").innerHTML=c.description;c.images?a.querySelector(".item-image").setAttribute("src",
c.images):a.querySelector(".item-image").parentElement.remove();var l=a.querySelector("select");l.forEach(function(a){a.innerHTML=""});if(c.variants1){var h=document.createElement("option");c.variants1.forEach(function(d){var b=a.querySelector("select.variant1").getSiblings("label");b.length&&(b[0].innerHTML=c.option1);b=h.cloneNode(!0);b.value=d;b.innerHTML=d;a.querySelector("select.variant1").append(b)})}else a.querySelector("select.variant1").parentElement.remove();c.variants2?(h=document.createElement("option"),
c.variants2.forEach(function(d){var b=a.querySelector("select.variant2").getSiblings("label");b.length&&(b[0].innerHTML=c.option2);b=h.cloneNode(!0);b.value=d;b.innerHTML=d;a.querySelector("select.variant2").append(b)})):a.querySelector("select.variant2").parentElement.remove();c.variants3?(h=document.createElement("option"),c.variants3.forEach(function(d){var b=a.querySelector("select.variant3").getSiblings("label");b.length&&(b[0].innerHTML=c.option3);b=h.cloneNode(!0);b.value=d;b.innerHTML=d;a.querySelector("select.variant3").append(b)})):
a.querySelector("select.variant3").parentElement.remove();c.price&&(c.allPrice=c.allPrice.split(","),a.querySelector(".item-price").innerHTML=c.allPrice[0]||c.price);var e={business:c.email,cmd:c.type,amount:a.querySelector(".item-price").innerHTML,item_name:a.querySelector(".item-name").innerHTML,currency_code:a.querySelector(".item-cur").innerHTML},k=a.find(".buy-button");a.querySelector(".variant1-label")&&(e.on0=a.querySelector(".variant1-label").innerHTML);a.querySelector("select.variant1")&&
(e.os0=a.querySelector("select.variant1").value);a.querySelector(".variant2-label")&&(e.on1=a.querySelector(".variant2-label").innerHTML);a.querySelector("select.variant2")&&(e.os1=a.querySelector("select.variant2").value);a.querySelector(".variant3-label")&&(e.on2=a.querySelector(".variant3-label").innerHTML);a.querySelector("select.variant3")&&(e.os2=a.querySelector("select.variant3").value);"_cart"===c.type&&k.setAttribute("href",k.getAttribute("href")+"&add=1");"_xclick-subscriptions"===e.cmd&&
(e.a3=c.a3,e.p3=c.p3,e.t3=c.t3,e.src=1);k.innerHTML=window.shopcartSettings.popup_button;e=URLSearchParams(Object.entries(e));k.setAttribute("href","https://www.paypal.com/cgi-bin/webscr?"+e);l.forEach(function(d){d.addEventListener("change",function(b){for(var c=b=0;c<d.variants1.length;c++)if(d.variants2&&d.variants3)for(var e=0;e<d.variants2.length;e++)for(var f=0;f<d.variants3.length;f++)a.querySelector("select.variant1").value==d.variants1[c]&&a.querySelector("select.variant2").value==d.variants2[e]&&
a.querySelector("select.variant3").value==d.variants3[f]&&(a.querySelector(".item-price").innerHTML=d.allPrice[b]),b++;else if(d.variants2)for(e=0;e<d.variants2.length;e++)a.querySelector("select.variant1").val\u0433\u0443==d.variants1[c]&&a.querySelector("select.variant2").value==d.variants2[e]&&(a.querySelector(".item-price").innerHTML=d.allPrice[b]),b++;else if(d.variants3)for(f=0;f<d.variants3.length;f++)a.querySelector("select.variant1").value==d.variants1[c]&&a.querySelector("select.variant3").value==
d.variants3[f]&&(a.querySelector(".item-price").innerHTML=d.allPrice[b]),b++;else a.querySelector("select.variant1").value==d.variants1[c]&&(a.querySelector(".item-price").innerHTML=d.allPrice[b]),b++;b={business:d.email,cmd:d.type,amount:a.querySelector(".item-price").innerHTML,item_name:a.querySelector(".item-name").innerHTML,currency_code:a.querySelector(".item-cur").innerHTML};a.querySelector(".variant1-label").length&&(b.on0=a.querySelector(".variant1-label").innerHTML);a.querySelector("select.variant1").length&&
(b.os0=a.querySelector("select.variant1").value);a.querySelector(".variant2-label").length&&(b.on1=a.querySelector(".variant2-label").innerHTML);a.querySelector("select.variant2").length&&(b.os1=a.querySelector("select.variant2").value);a.querySelector(".variant3-label").length&&(b.on2=a.querySelector(".variant3-label").innerHTML);a.querySelector("select.variant3").length&&(b.os2=a.querySelector("select.variant3").value);if("_donations"===d.type||"_xclick-subscriptions"===d.type)b.iten_number=b.amount,
delete b.amount;a.querySelector(".buy-button").setAttribute("href","https://www.paypal.com/cgi-bin/webscr?"+b);"_cart"===d.type&&a.querySelector(".buy-button").setAttribute("href",k.setAttribute("href")+"&add=1")})});f.stopPropagation();f.preventDefault()})});
